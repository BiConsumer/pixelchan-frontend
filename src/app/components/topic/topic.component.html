<div class="topic container">

  <div class="position-relative spinner">
    <ngx-spinner name="topic" type="line-scale-pulse-out" [fullScreen]="false" size="large" color="#4e62ce" bdColor="transparent"></ngx-spinner>
  </div>

  <div class="initial">

    <ng-template [ngIf]="topicDisplay">
      <p class="initial-title">{{topicDisplay.topic.name}}
        <a routerLink="/category/{{topicDisplay.topic.category}}" class=" initial-title-category badge">{{topicDisplay.topic.category}}</a>
      </p>

      <p class="initial-content">{{topicDisplay.posts[0].content}}</p>
    </ng-template>

    <div class="favorite" [ngClass]="(canHover ? 'favorite-hover' : '') + (!topicDisplay ? ' d-none' : '')">
      <p>{{favoriteCount}}</p>
      <ng-lottie height="3.8rem" width="3.8rem" (complete)="complete()" (click)="favorite()" (animationCreated)="animationCreated($event)" [options]="options"></ng-lottie>
    </div>

  </div>

  <div class="container" *ngIf="topicDisplay">
    <ng-template ngFor let-post [ngForOf]="topicDisplay.posts | slice:1:topicDisplay.posts.length" let-i="index">
      <div class="post">

        <div class="d-flex">
          <p class="post-author">Anonymous</p>
          <p class="post-date">{{post.createdAt | dateAgo}}</p>
        </div>

        <p class="post-content">{{post.content}}</p>
      </div>
    </ng-template>

    <form [formGroup]="postForm" (ngSubmit)="post()">
      <label for="post">Your comment</label>
      <textarea class="form-control" id="post" formControlName="content"></textarea>

      <pre></pre>

      <button class="btn btn-primary" type="submit">Send</button>
    </form>

  </div>

</div>
